{"version":3,"file":"tag.js","sources":["../../src/tag/tag.tsx"],"sourcesContent":["import { computed, defineComponent, h, VNode } from 'vue';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\n\nimport props from './props';\nimport { useConfig, usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport isString from 'lodash/isString';\n\nexport default defineComponent({\n  name: 'TTag',\n  props,\n  setup(props) {\n    const { globalConfig: tagGlobalConfig } = useConfig('tag');\n    const COMPONENT_NAME = usePrefixClass('tag');\n    const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const { SIZE } = useCommonClassName();\n\n    const tagClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}`,\n        `${COMPONENT_NAME.value}--${props.theme}`,\n        `${COMPONENT_NAME.value}--${props.variant}`,\n        {\n          [`${COMPONENT_NAME.value}--ellipsis`]: props.maxWidth,\n          [`${COMPONENT_NAME.value}--close`]: props.closable,\n          [`${COMPONENT_NAME.value}--disabled`]: props.disabled,\n          [SIZE.value[props.size]]: props.size !== 'medium',\n        },\n        props.shape !== 'square' && `${COMPONENT_NAME.value}--${props.shape}`,\n      ];\n    });\n\n    const tagStyle = computed<Record<string, string>>(() => {\n      const { maxWidth } = props;\n      return props.maxWidth\n        ? {\n            maxWidth: isNaN(Number(maxWidth)) ? String(maxWidth) : `${maxWidth}px`,\n          }\n        : {};\n    });\n\n    const handleClick = (e: MouseEvent) => {\n      if (props.disabled) return;\n      props.onClick?.({ e });\n    };\n\n    const getCloseIcon = () => {\n      if (!props.closable) return null;\n      const iconClassName = `${COMPONENT_NAME.value}__icon-close`;\n      if (tagGlobalConfig.value.closeIcon) {\n        return h(tagGlobalConfig.value.closeIcon(h) as VNode, { class: iconClassName });\n      }\n      return (\n        <CloseIcon\n          onClick={({ e }: { e: MouseEvent }) => {\n            e.stopPropagation();\n            props.onClose?.({ e });\n          }}\n          class={iconClassName}\n        />\n      );\n    };\n\n    return () => {\n      // 关闭按钮 自定义组件使用 nativeOnClick 绑定事件\n      const closeIcon = getCloseIcon();\n      // 标签内容\n      const tagContent = renderContent('default', 'content');\n      // 图标\n      const icon = renderTNodeJSX('icon');\n\n      const title = isString(tagContent) ? tagContent : '';\n      const titleAttribute = title && props.maxWidth ? title : undefined;\n\n      return (\n        <div class={tagClass.value} style={tagStyle.value} onClick={handleClick}>\n          {icon}\n          {props.maxWidth ? (\n            <span class={{ [`${COMPONENT_NAME.value}--text`]: props.maxWidth }} title={titleAttribute}>\n              {tagContent}\n            </span>\n          ) : (\n            tagContent\n          )}\n          {!props.disabled && closeIcon}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","_useConfig","useConfig","tagGlobalConfig","globalConfig","COMPONENT_NAME","usePrefixClass","_useGlobalIcon","useGlobalIcon","CloseIcon","TdCloseIcon","renderTNodeJSX","useTNodeJSX","renderContent","useContent","_useCommonClassName","useCommonClassName","SIZE","tagClass","computed","concat","value","theme","variant","_defineProperty","maxWidth","closable","disabled","size","shape","tagStyle","isNaN","Number","String","handleClick","e","_props2$onClick","onClick","getCloseIcon","iconClassName","closeIcon","h","_createVNode","_ref2","_props2$onClose","stopPropagation","onClose","tagContent","icon","title","isString","titleAttribute"],"mappings":"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"}